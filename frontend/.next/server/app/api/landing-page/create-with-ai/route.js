"use strict";(()=>{var e={};e.id=511,e.ids=[511],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},39491:e=>{e.exports=require("assert")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},82361:e=>{e.exports=require("events")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},63477:e=>{e.exports=require("querystring")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},59796:e=>{e.exports=require("zlib")},86895:(e,t,i)=>{i.r(t),i.d(t,{headerHooks:()=>x,originalPathname:()=>O,requestAsyncStorage:()=>m,routeModule:()=>p,serverHooks:()=>f,staticGenerationAsyncStorage:()=>g,staticGenerationBailout:()=>b});var n={};i.r(n),i.d(n,{POST:()=>c}),i(65629);var a=i(70532),r=i(84952),o=i(29622),s=i(26360),d=i(62704);(function(){var e=Error("Cannot find module '@/lib/auth'");throw e.code="MODULE_NOT_FOUND",e})(),function(){var e=Error("Cannot find module '@/lib/prisma'");throw e.code="MODULE_NOT_FOUND",e}();let l=d.z.object({selectedSections:d.z.array(d.z.string()),generatedContent:d.z.any().optional(),businessDescription:d.z.string(),language:d.z.enum(["es","en","fi"]).default("es")});async function c(e){try{let t=await (0,s.getServerSession)(Object(function(){var e=Error("Cannot find module '@/lib/auth'");throw e.code="MODULE_NOT_FOUND",e}()));if(!t?.user?.id)return o.Z.json({error:"No autorizado"},{status:401});let i=await e.json(),{selectedSections:n,generatedContent:a,businessDescription:r,language:d}=l.parse(i),c=await Object(function(){var e=Error("Cannot find module '@/lib/prisma'");throw e.code="MODULE_NOT_FOUND",e}()).landingPage.findUnique({where:{userId:t.user.id}});if(c)return o.Z.json({error:"Ya tienes una landing page creada"},{status:400});let u={[d]:{title:a?.general?.title||"Mi Negocio",subtitle:a?.general?.subtitle||"Descripci\xf3n de mi negocio",hero:a?.hero||{title:"Bienvenido a mi negocio",subtitle:r,cta:"Cont\xe1ctanos"},benefits:a?.benefits||[{title:"Calidad",description:"Productos de alta calidad"},{title:"Servicio",description:"Atenci\xf3n personalizada"},{title:"Precio",description:"Precios competitivos"}],testimonials:a?.testimonials||[{name:"Cliente 1",text:"Excelente servicio"},{name:"Cliente 2",text:"Muy recomendado"}],contact:a?.contact||{phone:"+1234567890",email:"info@minegocio.com",address:"Direcci\xf3n de mi negocio"}}};"es"!==d&&(u.es={title:"Mi Negocio",subtitle:"Descripci\xf3n de mi negocio",hero:{title:"Bienvenido a mi negocio",subtitle:r,cta:"Cont\xe1ctanos"},benefits:[{title:"Calidad",description:"Productos de alta calidad"},{title:"Servicio",description:"Atenci\xf3n personalizada"},{title:"Precio",description:"Precios competitivos"}],testimonials:[{name:"Cliente 1",text:"Excelente servicio"},{name:"Cliente 2",text:"Muy recomendado"}],contact:{phone:"+1234567890",email:"info@minegocio.com",address:"Direcci\xf3n de mi negocio"}}),"en"!==d&&(u.en={title:"My Business",subtitle:"My business description",hero:{title:"Welcome to my business",subtitle:r,cta:"Contact us"},benefits:[{title:"Quality",description:"High quality products"},{title:"Service",description:"Personalized attention"},{title:"Price",description:"Competitive prices"}],testimonials:[{name:"Customer 1",text:"Excellent service"},{name:"Customer 2",text:"Highly recommended"}],contact:{phone:"+1234567890",email:"info@mybusiness.com",address:"My business address"}}),"fi"!==d&&(u.fi={title:"Yritykseni",subtitle:"Yritykseni kuvaus",hero:{title:"Tervetuloa yritykseeni",subtitle:r,cta:"Ota yhteytt\xe4"},benefits:[{title:"Laatu",description:"Korkealaatuiset tuotteet"},{title:"Palvelu",description:"Henkil\xf6kohtainen palvelu"},{title:"Hinta",description:"Kilpailukykyiset hinnat"}],testimonials:[{name:"Asiakas 1",text:"Erinomainen palvelu"},{name:"Asiakas 2",text:"Eritt\xe4in suositeltava"}],contact:{phone:"+358 XX XXX XXXX",email:"info@yritykseni.fi",address:"Yritykseni osoite"}});let p=await Object(function(){var e=Error("Cannot find module '@/lib/prisma'");throw e.code="MODULE_NOT_FOUND",e}()).landingPage.create({data:{userId:t.user.id,content:u,colorScheme:{primary:"#3B82F6",secondary:"#10B981",accent:"#F59E0B",background:"#FFFFFF",text:"#1F2937"},seoKeywords:a?.seoKeywords||"",isPublished:!0}}),m=["HERO","CATALOG","BENEFITS","TESTIMONIALS","MAP","CONTACT","FOOTER"];for(let e of n){let t={};"CONTACT_FORM"===e?(t={contactForm:a?.contactForm||{enabled:!0,title:{es:"Cont\xe1ctanos",en:"Contact Us",fi:"Ota yhteytt\xe4"},subtitle:{es:"Env\xedanos un mensaje y te responderemos pronto",en:"Send us a message and we'll get back to you soon",fi:"L\xe4het\xe4 meille viesti, niin vastaamme pian"},fields:[{id:"name",type:"text",label:{es:"Nombre",en:"Name",fi:"Nimi"},required:!0,enabled:!0},{id:"phone",type:"tel",label:{es:"Tel\xe9fono",en:"Phone",fi:"Puhelin"},required:!0,enabled:!0},{id:"email",type:"email",label:{es:"Email",en:"Email",fi:"S\xe4hk\xf6posti"},required:!1,enabled:!0},{id:"message",type:"textarea",label:{es:"Mensaje",en:"Message",fi:"Viesti"},required:!0,enabled:!0}],submitButton:{es:"Enviar Mensaje",en:"Send Message",fi:"L\xe4het\xe4 viesti"},successMessage:{es:"\xa1Gracias! Tu mensaje ha sido enviado correctamente.",en:"Thank you! Your message has been sent successfully.",fi:"Kiitos! Viestisi on l\xe4hetetty onnistuneesti."}}},await Object(function(){var e=Error("Cannot find module '@/lib/prisma'");throw e.code="MODULE_NOT_FOUND",e}()).landingPageSection.create({data:{landingPageId:p.id,sectionType:"CONTACT",isEnabled:!0,order:m.indexOf("CONTACT")+1,config:t}})):await Object(function(){var e=Error("Cannot find module '@/lib/prisma'");throw e.code="MODULE_NOT_FOUND",e}()).landingPageSection.create({data:{landingPageId:p.id,sectionType:e,isEnabled:!0,order:m.indexOf(e)+1,config:t}})}return n.includes("FOOTER")||await Object(function(){var e=Error("Cannot find module '@/lib/prisma'");throw e.code="MODULE_NOT_FOUND",e}()).landingPageSection.create({data:{landingPageId:p.id,sectionType:"FOOTER",isEnabled:!0,order:m.indexOf("FOOTER")+1}}),o.Z.json({success:!0,landingPageId:p.id,message:"Landing page creada exitosamente"})}catch(e){if(console.error("Create landing page with AI error:",e),e instanceof d.z.ZodError)return o.Z.json({error:"Datos inv\xe1lidos"},{status:400});return o.Z.json({error:"Error interno del servidor"},{status:500})}}let u=a.AppRouteRouteModule,p=new u({definition:{kind:r.x.APP_ROUTE,page:"/api/landing-page/create-with-ai/route",pathname:"/api/landing-page/create-with-ai",filename:"route",bundlePath:"app/api/landing-page/create-with-ai/route"},resolvedPagePath:"/home/project/frontend/app/api/landing-page/create-with-ai/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:m,staticGenerationAsyncStorage:g,serverHooks:f,headerHooks:x,staticGenerationBailout:b}=p,O="/api/landing-page/create-with-ai/route"}};var t=require("../../../../webpack-runtime.js");t.C(e);var i=e=>t(t.s=e),n=t.X(0,[822,670,704,360],()=>i(86895));module.exports=n})();