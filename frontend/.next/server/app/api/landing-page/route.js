"use strict";(()=>{var e={};e.id=564,e.ids=[564],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},39491:e=>{e.exports=require("assert")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},82361:e=>{e.exports=require("events")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},63477:e=>{e.exports=require("querystring")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},59796:e=>{e.exports=require("zlib")},86330:(e,t,i)=>{i.r(t),i.d(t,{headerHooks:()=>b,originalPathname:()=>y,requestAsyncStorage:()=>g,routeModule:()=>m,serverHooks:()=>f,staticGenerationAsyncStorage:()=>O,staticGenerationBailout:()=>E});var o={};i.r(o),i.d(o,{GET:()=>l,PUT:()=>u}),i(65629);var r=i(70532),n=i(84952),a=i(29622),s=i(26360),d=i(62704);(function(){var e=Error("Cannot find module '@/lib/auth'");throw e.code="MODULE_NOT_FOUND",e})(),function(){var e=Error("Cannot find module '@/lib/prisma'");throw e.code="MODULE_NOT_FOUND",e}();let c=d.z.object({content:d.z.record(d.z.any()).optional(),colorScheme:d.z.record(d.z.any()).optional(),seoKeywords:d.z.string().optional(),isPublished:d.z.boolean().optional(),sections:d.z.array(d.z.object({sectionType:d.z.enum(["HERO","CATALOG","BENEFITS","TESTIMONIALS","MAP","CONTACT","FOOTER"]),isEnabled:d.z.boolean(),config:d.z.record(d.z.any()).optional()})).optional()});async function l(e){try{let e=await (0,s.getServerSession)(Object(function(){var e=Error("Cannot find module '@/lib/auth'");throw e.code="MODULE_NOT_FOUND",e}()));if(!e?.user?.id)return a.Z.json({error:"No autorizado"},{status:401});let t=await Object(function(){var e=Error("Cannot find module '@/lib/prisma'");throw e.code="MODULE_NOT_FOUND",e}()).landingPage.findUnique({where:{userId:e.user.id},include:{sections:!0,images:!0}});if(!t){let t=await Object(function(){var e=Error("Cannot find module '@/lib/prisma'");throw e.code="MODULE_NOT_FOUND",e}()).landingPage.create({data:{userId:e.user.id,content:{es:{title:"Mi Negocio",subtitle:"Descripci\xf3n de mi negocio",hero:{title:"Bienvenido a mi negocio",subtitle:"Ofrecemos los mejores productos y servicios",cta:"Cont\xe1ctanos"},benefits:[{title:"Calidad",description:"Productos de alta calidad"},{title:"Servicio",description:"Atenci\xf3n personalizada"},{title:"Precio",description:"Precios competitivos"}],testimonials:[{name:"Cliente 1",text:"Excelente servicio"},{name:"Cliente 2",text:"Muy recomendado"}],contact:{phone:"+1234567890",email:"info@minegocio.com",address:"Direcci\xf3n de mi negocio"}},en:{title:"My Business",subtitle:"My business description",hero:{title:"Welcome to my business",subtitle:"We offer the best products and services",cta:"Contact us"},benefits:[{title:"Quality",description:"High quality products"},{title:"Service",description:"Personalized attention"},{title:"Price",description:"Competitive prices"}],testimonials:[{name:"Customer 1",text:"Excellent service"},{name:"Customer 2",text:"Highly recommended"}],contact:{phone:"+1234567890",email:"info@mybusiness.com",address:"My business address"}},fi:{title:"Yritykseni",subtitle:"Yritykseni kuvaus",hero:{title:"Tervetuloa yritykseeni",subtitle:"Tarjoamme parhaat tuotteet ja palvelut",cta:"Ota yhteytt\xe4"},benefits:[{title:"Laatu",description:"Korkealaatuiset tuotteet"},{title:"Palvelu",description:"Henkil\xf6kohtainen palvelu"},{title:"Hinta",description:"Kilpailukykyiset hinnat"}],testimonials:[{name:"Asiakas 1",text:"Erinomainen palvelu"},{name:"Asiakas 2",text:"Eritt\xe4in suositeltava"}],contact:{phone:"+1234567890",email:"info@yritykseni.com",address:"Yritykseni osoite"}}},colorScheme:{primary:"#3B82F6",secondary:"#10B981",accent:"#F59E0B",background:"#FFFFFF",text:"#1F2937"}}});for(let e of[{sectionType:"HERO",isEnabled:!0,order:1},{sectionType:"CATALOG",isEnabled:!0,order:2},{sectionType:"BENEFITS",isEnabled:!0,order:3},{sectionType:"TESTIMONIALS",isEnabled:!0,order:4},{sectionType:"MAP",isEnabled:!0,order:5},{sectionType:"CONTACT",isEnabled:!0,order:6},{sectionType:"FOOTER",isEnabled:!0,order:7}])await Object(function(){var e=Error("Cannot find module '@/lib/prisma'");throw e.code="MODULE_NOT_FOUND",e}()).landingPageSection.create({data:{landingPageId:t.id,sectionType:e.sectionType,isEnabled:e.isEnabled,order:e.order}});let i=await Object(function(){var e=Error("Cannot find module '@/lib/prisma'");throw e.code="MODULE_NOT_FOUND",e}()).landingPage.findUnique({where:{id:t.id},include:{sections:!0,images:!0}});return a.Z.json(i)}return a.Z.json(t)}catch(e){return console.error("Get landing page error:",e),a.Z.json({error:"Error interno del servidor"},{status:500})}}async function u(e){try{let t=await (0,s.getServerSession)(Object(function(){var e=Error("Cannot find module '@/lib/auth'");throw e.code="MODULE_NOT_FOUND",e}()));if(!t?.user?.id)return a.Z.json({error:"No autorizado"},{status:401});let i=await e.json(),o=c.parse(i),r=await Object(function(){var e=Error("Cannot find module '@/lib/prisma'");throw e.code="MODULE_NOT_FOUND",e}()).landingPage.findUnique({where:{userId:t.user.id}});if(!r)return a.Z.json({error:"Landing page no encontrada"},{status:404});let n={};o.content&&(n.content=o.content),o.colorScheme&&(n.colorScheme=o.colorScheme),void 0!==o.seoKeywords&&(n.seoKeywords=o.seoKeywords),void 0!==o.isPublished&&(n.isPublished=o.isPublished);let d=await Object(function(){var e=Error("Cannot find module '@/lib/prisma'");throw e.code="MODULE_NOT_FOUND",e}()).landingPage.update({where:{id:r.id},data:n});if(o.sections)for(let e of o.sections)await Object(function(){var e=Error("Cannot find module '@/lib/prisma'");throw e.code="MODULE_NOT_FOUND",e}()).landingPageSection.upsert({where:{landingPageId_sectionType:{landingPageId:r.id,sectionType:e.sectionType}},update:{isEnabled:e.isEnabled,config:e.config||null},create:{landingPageId:r.id,sectionType:e.sectionType,isEnabled:e.isEnabled,order:["HERO","CATALOG","BENEFITS","TESTIMONIALS","MAP","CONTACT","FOOTER"].indexOf(e.sectionType)+1,config:e.config||null}});return a.Z.json(d)}catch(e){return console.error("Update landing page error:",e),a.Z.json({error:"Error interno del servidor"},{status:500})}}let p=r.AppRouteRouteModule,m=new p({definition:{kind:n.x.APP_ROUTE,page:"/api/landing-page/route",pathname:"/api/landing-page",filename:"route",bundlePath:"app/api/landing-page/route"},resolvedPagePath:"/home/project/frontend/app/api/landing-page/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:g,staticGenerationAsyncStorage:O,serverHooks:f,headerHooks:b,staticGenerationBailout:E}=m,y="/api/landing-page/route"}};var t=require("../../../webpack-runtime.js");t.C(e);var i=e=>t(t.s=e),o=t.X(0,[822,670,704,360],()=>i(86330));module.exports=o})();