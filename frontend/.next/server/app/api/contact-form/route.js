"use strict";(()=>{var e={};e.id=931,e.ids=[931],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},67249:(e,r,n)=>{n.r(r),n.d(r,{headerHooks:()=>g,originalPathname:()=>A,requestAsyncStorage:()=>f,routeModule:()=>l,serverHooks:()=>p,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>P});var t={};n.r(t),n.d(t,{POST:()=>d}),n(65629);var o=n(70532),a=n(84952),i=n(29622),s=n(62704);!function(){var e=Error("Cannot find module '@/lib/prisma'");throw e.code="MODULE_NOT_FOUND",e}();let u=s.z.object({subdomain:s.z.string().min(1),formData:s.z.record(s.z.string()),language:s.z.enum(["es","en","fi"]).optional()});async function d(e){try{let r=await e.json(),{subdomain:n,formData:t,language:o="es"}=u.parse(r),a=await Object(function(){var e=Error("Cannot find module '@/lib/prisma'");throw e.code="MODULE_NOT_FOUND",e}()).user.findUnique({where:{subdomain:n},include:{landingPage:{include:{sections:!0}}}});if(!a||!a.landingPage)return i.Z.json({error:"Landing page not found"},{status:404});let s=a.landingPage.sections.find(e=>"CONTACT"===e.sectionType);if(!s?.config?.contactForm?.enabled)return i.Z.json({error:"Contact form is not enabled"},{status:400});return await Object(function(){var e=Error("Cannot find module '@/lib/prisma'");throw e.code="MODULE_NOT_FOUND",e}()).contactFormSubmission.create({data:{landingPageId:a.landingPage.id,formData:t,language:o,ipAddress:e.headers.get("x-forwarded-for")||"unknown",userAgent:e.headers.get("user-agent")||"unknown"}}),i.Z.json({success:!0,message:"Form submitted successfully"})}catch(e){if(console.error("Contact form submission error:",e),e instanceof s.z.ZodError)return i.Z.json({error:"Invalid form data"},{status:400});return i.Z.json({error:"Internal server error"},{status:500})}}let c=o.AppRouteRouteModule,l=new c({definition:{kind:a.x.APP_ROUTE,page:"/api/contact-form/route",pathname:"/api/contact-form",filename:"route",bundlePath:"app/api/contact-form/route"},resolvedPagePath:"/home/project/frontend/app/api/contact-form/route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:f,staticGenerationAsyncStorage:m,serverHooks:p,headerHooks:g,staticGenerationBailout:P}=l,A="/api/contact-form/route"},84952:(e,r)=>{var n;Object.defineProperty(r,"x",{enumerable:!0,get:function(){return n}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(n||(n={}))}};var r=require("../../../webpack-runtime.js");r.C(e);var n=e=>r(r.s=e),t=r.X(0,[670,704],()=>n(67249));module.exports=t})();